import ansiColors from "ansi-colors";
import { asyncDetectANSISupport } from "./asyncDetectANSISupport";
import { isDevelopment } from "../nodeDetector/isDevelopment";

// Initially set ansiColors.enabled to true
ansiColors.enabled = true;

// Create a promise that resolves when the async initialization is complete
export const ansiInitializationPromise = (async () => {
  const supportsAnsiColors = await asyncDetectANSISupport();
  if (!supportsAnsiColors) {
    if (isDevelopment()) {
      console.log("Turn off Ansi-Coloring!");
    }
    ansiColors.enabled = false;
  }
})();

export const ansify = ansiColors;
