import z from "zod";

import { Transmuter } from "../Transmuter/types";

export type SynthesizerMiddlewareChain = Array<
  Transmuter | Synthesizer | SynthesizerMiddlewareChain
>;

export const Synthesizer = z.lazy(() =>
  z.object({
    middlewareChain: z.array(Transmuter),
    synthesize: z.function(z.tuple([z.unknown()]), z.unknown()),
  })
);
export interface Synthesizer {
  middlewareChain: Transmuter[];
  synthesize: (err: unknown) => unknown;
}
