"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.executeSynthesizerMiddlewareOneByOne = exports.flattenMiddlewareChain = void 0;
var SynthesizedError_1 = require("../../transmuted-errors/SynthesizedError");
var types_1 = require("./types");
function flattenMiddlewareChain(middlewareChain) {
    var result = [];
    middlewareChain.forEach(function (mw) {
        if (Array.isArray(mw)) {
            result.push.apply(result, flattenMiddlewareChain(mw));
        }
        else if (types_1.Synthesizer.safeParse(mw).success) {
            result.push.apply(result, mw.middlewareChain);
        }
        else {
            result.push(mw);
        }
    });
    return result;
}
exports.flattenMiddlewareChain = flattenMiddlewareChain;
var executeSynthesizerMiddlewareOneByOne = function (err, transmuters) {
    var result = err;
    for (var _i = 0, transmuters_1 = transmuters; _i < transmuters_1.length; _i++) {
        var mw = transmuters_1[_i];
        result = mw.execute(result);
        if (result instanceof SynthesizedError_1.SynthesizedError)
            break;
    }
    return result;
};
exports.executeSynthesizerMiddlewareOneByOne = executeSynthesizerMiddlewareOneByOne;
//# sourceMappingURL=helpers.js.map